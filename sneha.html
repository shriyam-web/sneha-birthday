<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday Sneha — From Ananya 💖</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-primary:#0f0f23;
    --bg-secondary:#1a1a2e;
    --bg-accent:#16213e;
    --gold:#ffd700;
    --blue:#00d4ff;
    --white:#ffffff;
    --muted:#b0b0b0;
    --glass: rgba(255,255,255,0.06);
    --glow: rgba(0,212,255,0.45);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;font-family:Poppins,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
    background: radial-gradient(circle at 20% 80%, rgba(0,212,255,0.12), transparent),
                radial-gradient(circle at 80% 20%, rgba(255,215,0,0.09), transparent),
                linear-gradient(160deg, var(--bg-primary), var(--bg-secondary));
    min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;padding:clamp(16px,5vw,36px) clamp(12px,4vw,24px);color:var(--white);overflow-x:hidden;overflow-y:auto;
  }
  .frame{width:100%;max-width:min(100%,clamp(360px,92vw,1100px));border-radius:clamp(18px,4vw,30px);position:relative;
    background:rgba(17,17,35,0.78);backdrop-filter:blur(10px);
    box-shadow:0 22px 60px rgba(0,0,0,0.55);border:1px solid rgba(255,255,255,0.06);transition:max-width 250ms ease, border-radius 250ms ease;margin:0 auto clamp(24px,6vw,32px);
  }
  .layer{position:absolute;inset:0;pointer-events:none}
  .glow{position:absolute;border-radius:50%;filter:blur(70px);opacity:0.24}
  .intro-overlay{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:18px;z-index:120;padding:32px 18px;background:linear-gradient(180deg,rgba(15,15,35,0.95),rgba(26,26,46,0.95));backdrop-filter:blur(6px);overflow-y:auto}
  .overlay-content{max-width:min(92vw,720px);text-align:center;color:var(--white);display:grid;gap:12px}
  .overlay-heading{font-family:'Dancing Script',serif;font-size:clamp(26px,8vw,42px);margin:0;color:var(--white)}
  .overlay-subtitle{color:var(--muted);font-size:clamp(14px,4vw,18px);margin:0}
  .overlay-buttons{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;width:100%}
  .overlay-buttons .btn{flex:1 1 160px}
  header{display:flex;flex-direction:column;align-items:center;text-align:center;padding:clamp(24px,7vw,36px) clamp(16px,5vw,26px);background:linear-gradient(140deg,var(--gold),var(--blue));color:var(--bg-primary);gap:clamp(12px,4vw,18px);margin-top:clamp(24px,8vw,40px);border-radius:18px}
  header img{width:clamp(88px,24vw,150px);height:clamp(88px,24vw,150px);border-radius:50%;object-fit:cover;border:clamp(3px,1vw,5px) solid rgba(255,255,255,0.85);box-shadow:0 10px 24px rgba(0,0,0,0.25)}
  h1{margin:0;font-family:'Dancing Script',serif;font-size:clamp(28px,7vw,42px);color:var(--bg-primary)}
  .lead{margin:0;color:rgba(15,15,35,0.78);font-size:clamp(13px,3.8vw,16px);text-align:center;line-height:1.45;font-weight:500}
  .main{display:flex;flex-direction:column;gap:clamp(14px,4vw,20px);padding:clamp(16px,5vw,24px)}
  .card{background:rgba(255,255,255,0.05);border-radius:18px;padding:clamp(16px,5vw,22px);border:1px solid rgba(255,255,255,0.06);box-shadow:0 12px 32px rgba(0,0,0,0.35)}
  .reveal{display:flex;flex-direction:column;align-items:center;text-align:center;gap:clamp(14px,4vw,20px)}
  .memory-cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:clamp(10px,3vw,14px);width:100%}
  .memory-card{height:clamp(120px,34vw,168px);border-radius:14px;background:linear-gradient(140deg,rgba(255,255,255,0.08),rgba(255,255,255,0.02));position:relative;overflow:hidden}
  .memory-card img{width:100%;height:100%;object-fit:cover}
  .caption{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);font-size:clamp(11px,3vw,13px);background:rgba(0,0,0,0.55);padding:4px 10px;border-radius:12px}
  .center-area{padding:0 clamp(4px,2vw,10px)}
  .line{font-family:'Dancing Script',serif;font-size:clamp(22px,7vw,30px);color:var(--white);opacity:0;transform:translateY(20px);margin:4px 0;text-shadow:0 0 16px rgba(0,212,255,0.2)}
  .line.small{font-family:Poppins;font-size:clamp(13px,4vw,16px);color:var(--muted);line-height:1.55}
  .final{font-weight:700;font-size:clamp(17px,5.5vw,24px);margin-top:10px;opacity:0;transform:scale(.95);background:linear-gradient(90deg,var(--gold),var(--blue));-webkit-background-clip:text;background-clip:text;color:transparent}
  .controls{display:flex;flex-direction:column;gap:clamp(10px,3vw,14px);margin-top:12px;width:100%}
  .btn{border-radius:22px;padding:clamp(10px,3.5vw,12px) clamp(14px,5vw,18px);border:none;cursor:pointer;font-weight:600;font-family:inherit;font-size:clamp(13px,3.6vw,15px);width:100%;touch-action:manipulation}
  .btn-primary{background:linear-gradient(115deg,var(--gold),var(--blue));color:var(--bg-primary)}
  .btn-ghost{background:rgba(255,255,255,0.08);color:var(--white);border:1px solid rgba(255,255,255,0.12)}
  .hearts{position:absolute;inset:0;pointer-events:none;z-index:3}
  .heart{position:absolute;font-size:clamp(14px,4vw,20px);opacity:0.16}
  .trail{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:200}
  .info-card{display:grid;gap:clamp(10px,3.2vw,16px);text-align:left}
  .section-title{font-weight:600;font-size:clamp(18px,5vw,22px);color:var(--white);margin:0}
  .section-note{color:var(--muted);font-size:clamp(13px,3.6vw,15px);line-height:1.5;margin:0}
  .timeline{list-style:none;margin:0;padding:0;display:grid;gap:clamp(8px,2.8vw,12px)}
  .timeline-item{display:grid;gap:clamp(3px,1vw,6px)}
  .timeline-item .time{font-weight:600;color:var(--gold);font-size:clamp(12px,3.4vw,14px);text-transform:uppercase;letter-spacing:0.6px}
  .timeline-item .detail{color:var(--muted);font-size:clamp(13px,3.8vw,15px);line-height:1.45}
  .affirmations{display:grid;gap:clamp(6px,2vw,10px)}
  .affirmations span{padding:clamp(9px,3vw,12px);border-radius:12px;background:rgba(255,255,255,0.08);color:var(--white);font-size:clamp(13px,3.6vw,15px)}
  .playlist{margin:0;padding-left:clamp(16px,5vw,20px);color:var(--muted);font-size:clamp(13px,3.6vw,15px);line-height:1.45}
  .playlist li{margin-bottom:clamp(5px,1.6vw,8px)}
  .playlist strong{color:var(--white)}
  footer{padding:clamp(12px,3.5vw,18px);text-align:center;color:var(--muted);font-size:clamp(12px,3.4vw,14px)}
  @supports (padding: max(0px, env(safe-area-inset-top))){
    body{padding-top:calc(clamp(16px,5vw,36px) + env(safe-area-inset-top));padding-bottom:calc(clamp(16px,5vw,36px) + env(safe-area-inset-bottom));}
    .intro-overlay{padding-top:calc(24px + env(safe-area-inset-top));padding-bottom:calc(24px + env(safe-area-inset-bottom));}
  }
  @media (max-width:480px){
    .main{padding:clamp(14px,5vw,18px);gap:clamp(12px,4vw,16px)}
    .card{padding:clamp(14px,4.5vw,18px);border-radius:16px}
    .memory-cards{gap:clamp(8px,3vw,12px)}
    .memory-card{height:clamp(126px,38vw,160px)}
    .controls{gap:clamp(8px,3vw,12px)}
  }
  @media (max-width:360px){
    body{padding:clamp(12px,7vw,14px)}
    .memory-cards{grid-template-columns:1fr}
    .memory-card{height:clamp(140px,48vw,176px)}
  }
  @media (min-width:540px){
    body{padding:clamp(24px,6vw,40px)}
    .frame{max-width:min(100%,640px);border-radius:clamp(22px,3vw,28px)}
    header{padding:clamp(32px,6vw,40px) clamp(22px,5vw,30px)}
    header img{width:clamp(118px,22vw,150px);height:clamp(118px,22vw,150px)}
    .main{padding:clamp(20px,5vw,28px);gap:clamp(18px,4vw,24px)}
    .memory-cards{grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}
    .memory-card{height:clamp(150px,26vw,200px)}
    .controls{flex-direction:row}
    .controls .btn{width:auto;flex:1}
  }
  @media (min-width:768px){
    body{padding:clamp(36px,5vw,48px)}
    .frame{max-width:min(100%,860px);border-radius:clamp(26px,4vw,32px)}
    header{padding:clamp(38px,6vw,46px) clamp(28px,5vw,36px);gap:clamp(16px,3vw,22px)}
    header img{width:clamp(140px,18vw,170px);height:clamp(140px,18vw,170px);border-width:5px}
    h1{font-size:clamp(34px,5vw,44px)}
    .main{display:grid;grid-template-columns:minmax(0,1.05fr) minmax(0,0.95fr);gap:clamp(20px,3vw,28px);padding:clamp(24px,4.5vw,32px)}
    .reveal{grid-column:1 / -1;padding:clamp(24px,4vw,30px)}
    .info-card{gap:clamp(14px,3vw,20px)}
    .memory-cards{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
    .memory-card{height:clamp(180px,24vw,220px)}
  }
  @media (min-width:1024px){
    body{padding:clamp(44px,5vw,56px)}
    .frame{max-width:min(100%,980px)}
    .main{grid-template-columns:minmax(0,1.1fr) minmax(0,0.9fr);align-items:start;gap:clamp(22px,3vw,30px)}
    .reveal{grid-column:1;grid-row:1 / span 3;padding:clamp(26px,3.5vw,34px)}
    .info-card{grid-column:2}
    .memory-cards{grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}
    .memory-card{height:clamp(200px,22vw,240px)}
  }
  @media (min-width:1280px){
    body{padding:clamp(56px,5vw,72px)}
    .frame{max-width:min(100%,1120px);border-radius:34px}
    header{padding:52px 44px}
    header img{width:178px;height:178px}
    .reveal{padding:36px}
    .line{font-size:32px}
    .line.small{font-size:17px}
    .final{font-size:24px}
  }
</style>
</head>
<body>
  <div class="frame" role="main" aria-label="Birthday gift for Sneha">
    <div class="layer" aria-hidden="true">
      <div class="glow" style="width:420px;height:420px;left:70%;top:60%;background:radial-gradient(circle,#ffd6ea,transparent)"></div>
      <div class="glow" style="width:320px;height:320px;left:-6%;top:60%;background:radial-gradient(circle,#e8e6ff,transparent)"></div>
    </div>

    <!-- confetti canvas -->
    <canvas id="confettiCanvas" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:12" aria-hidden="true"></canvas>

    <!-- overlay intro (first thing user sees) -->
    <div id="overlay" class="intro-overlay">
      <div class="overlay-content">
        <p class="overlay-heading">From your best friend Ananya…</p>
        <p class="overlay-subtitle">A small surprise for you 💕 — click "Start Surprise" to open</p>
      </div>
      <div class="overlay-buttons">
        <button id="startBtn" class="btn btn-primary">Start Surprise</button>
        <button id="overlaySkip" class="btn btn-ghost">Open without sound</button>
      </div>
    </div>

    <header>
      <img src="8.jpg" alt="Sneha & Ananya">
      <h1>For my darling Sneha</h1>
      <p class="lead">A tiny pocket of love you can open anywhere, anytime.</p>
    </header>

    <div class="main" role="region" aria-label="Main content">
      <section class="card reveal">
        <div class="memory-cards" aria-hidden="true" id="memoryRow">
          <div class="memory-card" id="p1" data-caption="Our Smiles 😊"><img src="2.jpg" alt="Our Smiles"><div class="caption">😊</div></div>
          <div class="memory-card" id="p2" data-caption="Late Night Talks 🌙"><img src="3.jpg" alt="Late Night Talks"><div class="caption">🌙</div></div>
          <div class="memory-card" id="p3" data-caption="Group Selfies 💕"><img src="4.jpg" alt="Group Selfies"><div class="caption">💕</div></div>
          <div class="memory-card" id="p4" data-caption="Silly Days 😜"><img src="5.jpg" alt="Silly Days"><div class="caption">😜</div></div>
          <div class="memory-card" id="p5" data-caption="Forever ✨"><img src="6.jpg" alt="Forever"><div class="caption">✨</div></div>
        </div>
        </div>

        <div class="hearts" id="heartsLayer" aria-hidden="true"></div>

        <div class="center-area" id="centerArea">
          <div class="line" id="ln1">Happy Birthday, kuttu! 🩷</div>
          <div class="line" id="ln2">Even miles apart, you still manage to make my days brighter just by being you.</div>
          <div class="line" id="ln3">I miss you more than words can say, but I’m so thankful that distance hasn’t changed a thing between us.</div>
          <div class="line small" id="ln4">You’re my person, my forever safe space, and the one who just gets me no matter what. I wish I could be there to hug you tight and celebrate you the way you deserve.</div>
          <div class="final" id="finalLine">Until then, just know I’m cheering for you from afar, always. Love you endlessly, my special girl. 🐶🩷</div>

          <div class="controls">
            <button id="replayBtn" class="btn btn-ghost">Replay Magic</button>
            <button id="musicToggle" class="btn btn-primary">Pause Music</button>
          </div>
        </div>

      </section>

      
    </div>

    <footer>Made with all my heart — Ananya 💝</footer>

    <div class="trail" id="trail" aria-hidden="true"></div>
  </div>

<script>
const overlay = document.getElementById('overlay');
const startBtn = document.getElementById('startBtn');
const overlaySkip = document.getElementById('overlaySkip');
const confettiCanvas = document.getElementById('confettiCanvas');
const ctx = confettiCanvas.getContext('2d');
const memoryCards = Array.from(document.querySelectorAll('.memory-card'));
const lines = [document.getElementById('ln1'),document.getElementById('ln2'),document.getElementById('ln3'),document.getElementById('ln4')];
const finalLine = document.getElementById('finalLine');
const heartsLayer = document.getElementById('heartsLayer');
const trail = document.getElementById('trail');

let previousOverflow = '';

function disableBodyScroll(){
  previousOverflow = document.body.style.overflow;
  document.body.style.overflow = 'hidden';
}

function restoreBodyScroll(){
  document.body.style.overflow = previousOverflow;
}

disableBodyScroll();

document.addEventListener('DOMContentLoaded', ()=>{
  randomizeMemoryCards();
});

/* randomize memory cards order */
function randomizeMemoryCards(){ memoryCards.forEach(c => { if(!c) return; c.style.order = Math.floor(Math.random()*memoryCards.length); }); }

/* -----------------------
   Reveal / audio control
   ----------------------- */
let audioCtx = null, isPlaying=false, padOsc=null, pluckInt=null;
const musicToggle = document.getElementById('musicToggle');

function startAmbient(){
  if(isPlaying) return;
  try{
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  } catch(e){ console.warn('No audio'); return; }
  const master = audioCtx.createGain(); master.gain.value = 0.06; master.connect(audioCtx.destination);
  padOsc = audioCtx.createOscillator(); padOsc.type='sine';
  const padG = audioCtx.createGain(); padG.gain.value = 0.015;
  padOsc.connect(padG); padG.connect(master); padOsc.frequency.setValueAtTime(220, audioCtx.currentTime); padOsc.start();
  function pluck(freq, t){ const o = audioCtx.createOscillator(); o.type='triangle'; const g=audioCtx.createGain(); g.gain.value=0.0001; o.frequency.setValueAtTime(freq, audioCtx.currentTime+t); o.connect(g); g.connect(master); g.gain.setValueAtTime(0.001,audioCtx.currentTime+t); g.gain.exponentialRampToValueAtTime(0.06,audioCtx.currentTime+t+0.02); g.gain.exponentialRampToValueAtTime(0.0001,audioCtx.currentTime+t+1.2); o.start(audioCtx.currentTime+t); o.stop(audioCtx.currentTime+t+1.3); }
  pluck(440,0.2); pluck(554.37,0.6); pluck(659.25,1.2);
  pluckInt = setInterval(()=>{ pluck(392,0); pluck(523.25,0.4); pluck(659.25,0.9); }, 3000);
  isPlaying=true; musicToggle.textContent='Pause Music';
}
function toggleAudio(){ if(!audioCtx) { startAmbient(); return; } if(audioCtx.state==='running'){ audioCtx.suspend(); musicToggle.textContent='Play Music'; isPlaying=false } else { audioCtx.resume(); musicToggle.textContent='Pause Music'; isPlaying=true } }
musicToggle.addEventListener('click', ()=> toggleAudio());

/* start button — user gesture */
startBtn.addEventListener('click', (e)=>{
  // begin audio + reveal
  startAmbient();
  revealSequence();
  startConfetti();
  restoreBodyScroll();
  overlay.remove();
});
overlaySkip.addEventListener('click', ()=>{
  revealSequence();
  restoreBodyScroll();
  overlay.remove();
});

/* replay */
document.getElementById('replayBtn').addEventListener('click', ()=>{
  resetVisuals(); setTimeout(()=>{ revealSequence(); startConfetti(); }, 160);
});
function resetVisuals(){
  memoryCards.forEach((c,i)=>{ if(!c) return; c.style.opacity=0; c.style.transform='translateY(36px)'; });
  lines.forEach(l=>{ l.style.opacity=0; l.style.transform='translateY(24px)'; });
  finalLine.style.opacity=0; finalLine.style.transform='scale(.96)';
}

/* reveal sequence with sparkle and petals */
function revealSequence(){
  randomizeMemoryCards();
  memoryCards.forEach((card,i)=> {
    if(!card) return;
    card.style.opacity=0; card.style.transform='translateY(36px)';
    setTimeout(()=>{ card.style.transition='transform .85s cubic-bezier(.2,.9,.2,1), opacity .85s'; card.style.opacity=1; card.style.transform='translateY(0)'; }, 160 + i*120);
  });
  lines.forEach((el,i)=>{
    setTimeout(()=>{ el.style.transition='opacity .85s ease, transform .85s ease'; el.style.opacity=1; el.style.transform='translateY(0)'; createSparkles(el); }, 480 + i*720);
  });
  setTimeout(()=>{ finalLine.style.transition='opacity 1s ease, transform 1s ease'; finalLine.style.opacity=1; finalLine.style.transform='scale(1)'; burstPetals(); }, 480 + lines.length*720);
  startHearts();
}

/* -----------------------
   Sparkles, petals, hearts
   ----------------------- */
function createSparkles(target){
  const rect = target.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;
  for(let i=0;i<9;i++){
    const el = document.createElement('div');
    el.className='tiny';
    el.style.position='fixed';
    el.style.left = (cx + (Math.random()*160 - 80)) + 'px';
    el.style.top = (cy + (Math.random()*80 - 40)) + 'px';
    el.style.width = el.style.height = (4 + Math.random()*6) + 'px';
    el.style.borderRadius = '50%';
    el.style.background = 'rgba(255,255,255,0.95)';
    el.style.transform = `translateY(0) scale(${0.8 + Math.random()*0.6})`;
    el.style.transition = 'transform 900ms ease, opacity 900ms ease';
    document.body.appendChild(el);
    setTimeout(()=>{ el.style.transform = `translateY(${-140 - Math.random()*120}px) scale(0.2)`; el.style.opacity=0; }, 20 + Math.random()*120);
    setTimeout(()=> el.remove(), 1100 + Math.random()*500);
  }
}
function burstPetals(){
  for(let i=0;i<24;i++){
    const p = document.createElement('div');
    p.textContent = Math.random()>0.5 ? '❤' : '🌸';
    p.style.position='fixed';
    p.style.left = (20 + Math.random()*60) + '%';
    p.style.top = (55 + Math.random()*30) + '%';
    p.style.fontSize = (12 + Math.random()*28) + 'px';
    p.style.opacity = 0.16 + Math.random()*0.3;
    p.style.transition = 'transform 1700ms cubic-bezier(.2,.9,.2,1), opacity 1400ms ease';
    document.body.appendChild(p);
    setTimeout(()=>{ p.style.transform = `translateY(-420px) rotate(${Math.floor(Math.random()*720)}deg)`; p.style.opacity=0; }, 40 + Math.random()*120);
    setTimeout(()=> p.remove(), 2000 + Math.random()*800);
  }
}
let heartsInt=null;
function startHearts(){
  if(heartsInt) return;
  heartsInt = setInterval(()=> {
    const h = document.createElement('div');
    h.className='heart';
    h.textContent = ['❤','💕','🌸'][Math.floor(Math.random()*3)];
    h.style.position='absolute';
    h.style.left = (5 + Math.random()*90) + '%';
    h.style.bottom = '-40px';
    h.style.fontSize = (12 + Math.random()*28) + 'px';
    h.style.opacity = 0.08 + Math.random()*0.25;
    h.style.color = ['#ff7aa8','#f4accf','#cdb3ff'][Math.floor(Math.random()*3)];
    h.style.transition = 'transform 9s linear, opacity 9s linear';
    heartsLayer.appendChild(h);
    setTimeout(()=>{ h.style.transform = 'translateY(-560px)'; h.style.opacity=0; }, 50);
    setTimeout(()=> h.remove(), 9500);
  }, 700);
}

/* cursor trail */
document.addEventListener('mousemove', e=>{
  const s = document.createElement('span');
  s.textContent = ['❤','🌸','✨'][Math.floor(Math.random()*3)];
  s.style.position='fixed';
  s.style.left = e.clientX + 'px';
  s.style.top = e.clientY + 'px';
  s.style.fontSize = (10 + Math.random()*18) + 'px';
  s.style.transition = 'transform 900ms linear, opacity 900ms linear';
  trail.appendChild(s);
  setTimeout(()=>{ s.style.transform = 'translateY(-70px)'; s.style.opacity=0; }, 20);
  setTimeout(()=> s.remove(), 1000);
});

/* -----------------------
   Confetti (canvas)
   ----------------------- */
let dpr = window.devicePixelRatio || 1;
function resizeCanvas(){ dpr = window.devicePixelRatio || 1; confettiCanvas.width = Math.floor(window.innerWidth * dpr); confettiCanvas.height = Math.floor(window.innerHeight * dpr); confettiCanvas.style.width = window.innerWidth + 'px'; confettiCanvas.style.height = window.innerHeight + 'px'; ctx.setTransform(dpr,0,0,dpr,0,0); }
window.addEventListener('resize', resizeCanvas); resizeCanvas();

let confettiParticles = [], confAnim=null;
const colors = ['#ff7aa8','#f4accf','#cdb3ff','#fff3f8','#ffd6ea'];
function createParticle(){ return { x: Math.random()*confettiCanvas.width, y:-10, vx:(Math.random()-0.5)*4, vy:Math.random()*3+2, size:Math.random()*8+4, color: colors[Math.floor(Math.random()*colors.length)], rot: Math.random()*360, rotSpeed: (Math.random()-0.5)*10 }; }
function updateParticles(){ confettiParticles.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; p.vy += 0.08; p.rot += p.rotSpeed; if(p.y>confettiCanvas.height+20){ p.y=-10; p.x=Math.random()*confettiCanvas.width; p.vy=Math.random()*3+2; } }); }
function drawParticles(){ ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height); confettiParticles.forEach(p=>{ ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180); ctx.fillStyle = p.color; ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size); ctx.restore(); }); }
function animateConfetti(){ updateParticles(); drawParticles(); confAnim = requestAnimationFrame(animateConfetti); }
function startConfetti(){ const count = window.innerWidth < 768 ? 60 : 120; confettiParticles = []; for(let i=0;i<count;i++) confettiParticles.push(createParticle()); if(confAnim) cancelAnimationFrame(confAnim); animateConfetti(); setTimeout(()=>{ confettiParticles=[]; if(confAnim) cancelAnimationFrame(confAnim); ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height); }, 5000); }

</script>
</body>
</html>
